@startuml

Entity Полуфабрикат {
  Наименование
  Категория
  ед.изм
  Срок_годности
  Срок_хранения_открытой_упаковки
  Коэффициент_сезонности
  Штрих_код_общий
}

Entity Партия {
  Штрих_код_уникальный
  Дата_производства
  Годен_до
  Начальное_количество
  Текущее_количество
  Статус
  Дата_поступления
  Виртуальный_срок_годности
}

Entity Место_хранения {
  Наименование
  Тип
  Родитель
}

Entity Инвентаризация {
  Дата_инвентаризации
  Статус
}

Entity Элемент_инвентаризации { 
  Текущее_количество
}

Entity Поставщик {
  Наименование
  Контактная_информация
}

Entity Заказ_поставщику {
  Дата_заказа
  Статус
  Дата_доставки
}

Entity Позиция_заказа {
  Количество
  Рассчетное_количество
  Итоговое_количество
}

Entity Правило_пополнения {
  Минимальный_остаток
  Максимальный_остаток
  Точка_закупа
  Время_выполнения_заказа_в_днях
}

Entity Задание_на_утилизацию {
  Дата_создания
  Приоритет
  Статус
}

Entity Акт_списания {
  Дата_списания
  Количество
  Причина
  Ответственный
}

Entity Перемещение_запасов {
  Дата_перемещения
  Количество 
  Тип
  Источник
  Назначение
}

Entity Пользователь {
  Имя
}

Entity Роль {
  Наименование
  Права
}

Entity Оперативный_запас {
  Текущее_количество
  Виртуальный_срок_годности
  Статус
}

Entity Задание_на_пополнение {
  Дата_создания
  Приоритет
  Статус
  Количество
}

Entity Роботизированная_линия {
  Наименование
  Статус
  Производительность
}

' Связи пользователей
Пользователь "1" --> "1" Роль: имеет_роль
Пользователь "1" --> "1..*" Инвентаризация: Проводит
Пользователь "1" --> "0..*" Перемещение_запасов: Выполняет
Пользователь "1" --> "0..*" Задание_на_утилизацию: Выполняет
Пользователь "1" --> "0..*" Задание_на_пополнение: Выполняет

' Блок контроля
Инвентаризация "1" o-- "1..*" Элемент_инвентаризации
Задание_на_утилизацию "1" --o "1..*" Акт_списания

' Блок заказа
Позиция_заказа "1..*" --o "1" Заказ_поставщику
Полуфабрикат "1" --o "0..*" Позиция_заказа
Поставщик "1" --> "0..1" Заказ_поставщику: Выполняет
Заказ_поставщику "1" --> "0..*" Правило_пополнения: Использует
Правило_пополнения "1" -- "1" Полуфабрикат: для_полуфабриката

' Блок хранения и перемещений
Полуфабрикат "1" --o "0..*" Партия
Партия "1" -- "1" Место_хранения: хранится_в
Задание_на_утилизацию --> Место_хранения
Перемещение_запасов --> Место_хранения
Инвентаризация --> Место_хранения
Партия "1" -- "0..*" Перемещение_запасов

' Блок роботизированных линий
Оперативный_запас "1" -- "1" Роботизированная_линия: принадлежит
Оперативный_запас "1" -- "1" Полуфабрикат: содержит
Задание_на_пополнение "1" -- "1" Роботизированная_линия: для_линии
Задание_на_пополнение "1" -- "1" Партия: использует_партию

@enduml