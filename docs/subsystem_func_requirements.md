# Функциональные требования к подсистеме

## **Управление данными и номенклатурой**

* **FR1.1:** Система должна предоставлять интерфейс для ведения справочника **полуфабрикатов** с атрибутами: ID, название, единица измерения (шт/кг), категория.
* **FR1.2:** Система должна предоставлять интерфейс для ведения справочника **складских зон/ячеек** с атрибутами: ID, название, тип (холодильник, морозильник, оперативный запас линии).
* **FR1.3:** Система должна предоставлять интерфейс для ведения справочника **поставщиков** (логистических центров).
* **FR1.4:** Система должна поддерживать учет остатков на уровне **партий** с атрибутами: ID (штрихкод), привязка к полуфабрикату, дата производства, срок годности, дата поступления, текущее количество, статус (активна, заблокирована, утилизирована).

## **Инвентаризация**

* **FR2.1:** Система должна позволять формировать **задание на инвентаризацию** (сплошную или выборочную) с передачей списка зон/номенклатуры на мобильное устройство оператора.
* **FR2.2:** Система должна предоставлять **мобильный интерфейс** с возможностью сканирования штрих-кодов партий и внесения фактического количества/веса.
* **FR2.3:** Система должна автоматически **сверять внесенные фактические данные с системными остатками**.
* **FR2.4:** Система должна автоматически **формировать акт инвентаризации** с расчетом расхождений и проводить автоматическую коррекцию остатков в системе при подтверждении.

## **Автозаказ полуфабрикатов**

* **FR3.1:** Система должна предоставлять интерфейс для **настройки правил автозаказа** для каждого полуфабриката: минимальный/максимальный запас на складе, точка заказа, кратность партии, учет сезонности/прогноза продаж (опционально).
* **FR3.2:** Система должна **запускать алгоритм расчета заказа** ежедневно на основе актуальных остатков и настроенных правил.
* **FR3.3:** Система должна **формировать черновик заказа** и предоставлять возможность его ручной корректировки (на будущее).
* **FR3.4:** Система должна **автоматически утверждать и передавать** сформированный заказ в систему логистического центра (ЛЦ) через API.

## **Пополнение оперативного запаса линии**

* **FR4.1:** Система должна **отслеживать остаток полуфабрикатов в оперативном запасе** роботизированной линии.
* **FR4.2:** Система должна **автоматически формировать задание для оператора** на пополнение оперативного запаса при достижении минимального порога (по событию от робота).
* **FR4.3:** В задании оператору система должна **указывать конкретный штрихкод партии** со склада, отобранной по алгоритму **FEFO** (First Expired, First Out).
* **FR4.4:** Система должна **подтверждать перемещение** после сканирования оператором штрих-кода зоны "Оперативный запас": списывать количество со складской партии и добавлять к виртуальной "партии" оперативного запаса.

## **Контроль сроков годности и утилизация**

* **FR5.1:** Система должна по расписанию (настраиваемому) **проверять все партии** (складские и оперативные) на предмет истечения срока годности.
* **FR5.2:** Система должна **выявлять партии**, срок годности которых истекает в течение X часов (X – настраиваемый параметр).
* **FR5.3:** Система должна **автоматически блокировать** выявленные партии, подлежащие утилизации, исключая их использование для пополнения или приготовления.
* **FR5.4:** Система должна **формировать и отправлять оператору задание на утилизацию** с указанием локации и штрих-кода партии.
* **FR5.5:** Система должна **снимать блокировку и списывать** партию только после **подтверждения оператором** факта утилизации через мобильный интерфейс.

## **Интеграции (API)**

* **FR6.1:** Система должна предоставлять **API для роботизированной линии** для:

    * Запроса разрешения на использование полуфабриката из оперативного запаса (с возвратом статуса и срока годности).
    * Передачи данных о списании каждой единицы.

* **FR6.2:** Система должна предоставлять **API для обмена данными с системой Логистического Центра** для:

    * Получения данных о партиях (по штрих-коду) при их приемке.
    * Передачи сформированных заказов.

* **FR6.3:** Система должна предоставлять **API для получения данных о продажах** из CRM-системы ресторана для уточнения прогноза в алгоритме автозаказа (опционально).

## **Управление доступом (ролевая модель)**

* **FR7.1:** Система должна предоставлять **Оператору линии** права на:

    - Выполнение заданий по инвентаризации.
    - Пополнение оперативного запаса робота.  
    - Контроль работы робота.
    - Выполнение заданий по утилизации просроченных полуфабрикатов.
    - Подтверждение корректировки остатков при инвентаризации.
    - Подтверждение утилизации с указанием причины.

* **FR7.2:** Система должна предоставлять **Технологу** права на:

    - Заполнение справочников.
    - Составление технологических карт.
    - Утверждение утилизации.
    - Утверждение автозаказа.
    - Контроль срока годности полуфабрикатов по отчету.
    - Настройку правил автозаказа (минимальный/максимальный запас, точка заказа).
    - Настройку параметров контроля сроков годности.

* **FR7.3:** Система должна предоставлять **Администратору** системы полные права без ограничений на все функции системы.
