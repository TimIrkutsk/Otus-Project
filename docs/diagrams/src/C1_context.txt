@startuml
!include <C4/C4_Context>

title Система управления запасами - Контекстная диаграмма (Уровень 1)

Person(operator, "Оператор линии", "Сотрудник ресторана, проводит инвентаризацию и утилизацию")

Person(technologist, "Технолог", "Настраивает справочники и правила, контролирует заказы")

System(system, "Система управления запасами", "Автоматизирует контроль сроков хранения, инвентаризацию и автозаказ")

System_Ext(robot, "Роботизированная линия", "Промышленный робот для приготовления блюд")
System_Ext(logistics, "Логистический центр", "Центральный склад поставщика полуфабрикатов")


' Основные взаимодействия
Rel(operator, system, "Проводит инвентаризацию\nФиксирует утилизацию\nПополняет оперативный запас", "Мобильное приложение")
Rel(technologist, system, "Управляет заказами\nАнализирует отчеты\nКонтролирует сроки годности", "Веб-интерфейс")
Rel(technologist, system, "Ведет справочники\nНастраивает правила автозаказа", "Веб-интерфейс")

Rel(robot, system, "Запрашивает разрешение на использование\nСообщает о списаниях", "gRPC/WebSocket")
Rel(system, robot, "Блокирует использование просроченных партий\nПередает данные об остатках", "gRPC/WebSocket")

Rel(system, logistics, "Передает заказы\nПолучает данные о партиях", "REST")
Rel(logistics, system, "Подтверждает заказы\nПередает данные о поставках", "REST")


' Критические требования
Note right of system {
  <b>Ключевые требования:</b>
  - Масштабируемость до 100 ресторанов
  - Интеграция с роботом (<100 мс)
  - Контроль сроков годности
  - Автоматическое пополнение запасов
  - Доступность 99.9%
}
@enduml